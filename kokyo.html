<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>『故郷』究極の質問リスト：カネ派vs心派診断</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel (for JSX) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { font-family: "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">
    <div id="root"></div>
code
Code
<script type="text/babel">
    const { useState, useEffect } = React;

    // Icon Component Wrapper
    const Icon = ({ name, className, size = 24 }) => {
        useEffect(() => {
            lucide.createIcons();
        }, [name]); // Re-run when name changes

        return <i data-lucide={name} className={className} width={size} height={size}></i>;
    };

    const HometownDiagnosis = () => {
        const [answers, setAnswers] = useState({});
        const [showResult, setShowResult] = useState(false);
        const [expandedCards, setExpandedCards] = useState({});

        const toggleExpand = (id) => {
            setExpandedCards(prev => ({ ...prev, [id]: !prev[id] }));
        };

        const handleAnswer = (qId, type) => {
            setAnswers(prev => ({ ...prev, [qId]: type }));
            // 自動的に解説を開く
            if (!expandedCards[qId]) {
                setExpandedCards(prev => ({ ...prev, [qId]: true }));
            }
        };

        const calculateScore = () => {
            let money = 0;
            let heart = 0;
            Object.values(answers).forEach(type => {
                if (type === 'money') money++;
                if (type === 'heart') heart++;
            });
            return { money, heart, total: money + heart };
        };

        const scores = calculateScore();
        const progress = Math.round((scores.total / 15) * 100);

        const reset = () => {
            setAnswers({});
            setShowResult(false);
            setExpandedCards({});
            window.scrollTo(0, 0);
        };

        // 質問データの定義
        const questions = [
            {
                category: "カテゴリーA：【もしも…】お金の条件を変えてみる",
                icon: "banknote",
                color: "text-emerald-600",
                items: [
                    {
                        id: 1,
                        q: "もし閏土が宝くじに当たって大金持ちになっていたら、「私」を「旦那様」と呼んだかな？",
                        options: [
                            { type: 'money', label: "呼ばない", sub: "「やあ、迅ちゃん！」と呼ぶ", reason: "「お金さえあれば対等になれた」と考えているからです。今の卑屈な態度は性格ではなく、貧しさが作らせたものだと捉えています。" },
                            { type: 'heart', label: "やっぱり呼ぶ", sub: "金持ちでも丁寧語を使う", reason: "「お金があっても、染み付いた身分意識や上下関係は消えない」と考えているからです。壁の原因は心の中のルールにあります。" }
                        ]
                    },
                    {
                        id: 2,
                        q: "もし「私」が大富豪で、「閏ちゃん、これ100万円あげるよ」と言ったら、二人の壁は消えたかな？",
                        options: [
                            { type: 'money', label: "消える", sub: "泣いて感謝して仲良くなる", reason: "今の気まずさは、「助けてあげられない無力感」や「生活の苦しさ」から来ていると考えているからです。解決策（カネ）があれば壁は壊せます。" },
                            { type: 'heart', label: "消えない", sub: "逆に恐縮して距離ができる", reason: "「施し（めぐみ）」を受けることで、余計に惨めさや上下関係が強調されると考えているからです。心の距離はお金では買えません。" }
                        ]
                    }
                ]
            },
            {
                category: "カテゴリーB：【場面転換】シチュエーションを変えてみる",
                icon: "message-circle",
                color: "text-blue-600",
                items: [
                    {
                        id: 3,
                        q: "もし二人がスタバのようなカフェに入って、2時間お茶をすることになったら、会話は続く？",
                        options: [
                            { type: 'money', label: "続かない", sub: "沈黙しちゃう", reason: "仲が悪いのではなく、単に「共通の話題」がないだけだと捉えています。話題の差は、教育や旅などの「経験（カネで買うもの）」の差です。" },
                            { type: 'heart', label: "続く", sub: "昔話で盛り上がる", reason: "本来なら話せるはずなのに、会話がなかったのは「私」が勝手に期待して、勝手にガッカリした（心を閉ざした）からだと捉えています。" }
                        ]
                    },
                    {
                        id: 4,
                        q: "もし周りに誰もいなくて、完全な二人きりの密室だったら、閏土は「迅ちゃん」と呼べたかな？",
                        options: [
                            { type: 'money', label: "呼べた", sub: "甘えられた", reason: "閏土が他人行儀なのは、本心からではなく「周りの目」や「村の空気」を気にしているからだと捉えています。貧しい村の空気が彼を縛っています。" },
                            { type: 'heart', label: "呼べない", sub: "やっぱり無理", reason: "誰が見ていなくても、閏土自身のプライドや恐怖心が邪魔をすると考えているからです。「落ちぶれた自分」を認めたくないという心理が壁です。" }
                        ]
                    }
                ]
            },
            {
                category: "カテゴリーC：【見た目と中身】変化の正体を探る",
                icon: "eye",
                color: "text-amber-600",
                items: [
                    {
                        id: 5,
                        q: "もし閏土が、昔と同じツヤツヤした健康的な顔のままだったら、「私」は言葉を失ったかな？",
                        options: [
                            { type: 'money', label: "失わない", sub: "「変わらないね！」と抱きつく", reason: "「私」がショックを受けた最大の原因は「見た目の老化」だと捉えています。その老化の原因は、過酷な労働（カネの問題）にあります。" },
                            { type: 'heart', label: "失う", sub: "やっぱり話が続かない", reason: "見た目が若くても、信じているもの（科学vs迷信）が違えば、やっぱり話は噛み合わないと考えているからです。" }
                        ]
                    },
                    {
                        id: 6,
                        q: "閏土が去り際に「香炉（神様グッズ）」じゃなくて、「現金」を欲しがったら、「私」はどう思った？",
                        options: [
                            { type: 'money', label: "納得する", sub: "まあ、生活苦しいもんね", reason: "香炉だろうが現金だろうが、結局は「生きるために必要なもの」だと捉えています。形が違うだけで、根本原因は貧困です。" },
                            { type: 'heart', label: "軽蔑する", sub: "えっ、がめついな", reason: "「私」は美しい思い出や「品格」を求めているから、生々しい現実を突きつけられると引いてしまう（心を閉ざす）と考えているからです。" }
                        ]
                    }
                ]
            },
            {
                category: "カテゴリーD：【未来】次世代の関係を予想する",
                icon: "users",
                color: "text-indigo-600",
                items: [
                    {
                        id: 7,
                        q: "10年後、水生（閏土の子）と宏児（私の子）が再会したら、二人は仲良くなれる？",
                        options: [
                            { type: 'money', label: "なれない", sub: "水生が「旦那様」と呼ぶ", reason: "結局、水生は学校に行けず、宏児はエリートになるからです。親と同じ「経済格差」の道を辿る以上、同じ壁ができると考えます。" },
                            { type: 'heart', label: "なれる", sub: "対等に話す", reason: "もし仲良くなれるなら、今の二人に壁があるのは「古い時代の教育（身分意識）」のせいだからです。新しい心を持った世代なら、壁は越えられます。" }
                        ]
                    }
                ]
            },
            {
                category: "カテゴリーE：【罪と罰】「灰の中の食器」事件をどう見る？",
                icon: "gavel",
                color: "text-slate-600",
                items: [
                    {
                        id: 8,
                        q: "閏土が「灰の中に食器を隠した」と聞いた時、君はどう感じた？",
                        options: [
                            { type: 'money', label: "同情する", sub: "なりふり構わないほど苦しかった", reason: "あの行為を「盗み（悪）」ではなく「生存戦略」と捉えているからです。プライドを捨てさせるほどの貧困が原因だと考えています。" },
                            { type: 'heart', label: "ショック", sub: "純朴な閏土は死んでしまった", reason: "貧しさそのものより、心が卑しく変わってしまったこと（道徳心の低下）に絶望を感じているからです。これは心の問題です。" }
                        ]
                    },
                    {
                        id: 9,
                        q: "もし楊おばさんがいなくて、村がもっと平和だったら、閏土は食器を盗んだかな？",
                        options: [
                            { type: 'money', label: "盗まない", sub: "平和に暮らす", reason: "閏土個人が悪いのではなく、村全体を覆う「奪い合いの空気（貧困の連鎖）」が彼を追い詰めたと考えているからです。" },
                            { type: 'heart', label: "盗む", sub: "やっぱりチャンスがあればやる", reason: "周囲の環境に関係なく、今の閏土の心はすでに麻痺し、倫理観が壊れていると捉えているからです。" }
                        ]
                    }
                ]
            },
            {
                category: "カテゴリーF：【責任の所在】悪いのは「誰」だ？",
                icon: "brain",
                color: "text-purple-600",
                items: [
                    {
                        id: 10,
                        q: "閏土が「石像（木偶の坊）」みたいになった一番の犯人は何だと思う？",
                        options: [
                            { type: 'money', label: "社会システム", sub: "軍閥・重税・地主", reason: "個人の努力ではどうにもならない「社会システム（カネの搾取構造）」が人間を壊したと考えているからです。" },
                            { type: 'heart', label: "古い慣習", sub: "伝統・迷信・教育不足", reason: "彼を縛っているのは税金だけでなく、「こう生きるしかない」という思い込みや、古い慣習（心の中の鎖）だと考えているからです。" }
                        ]
                    },
                    {
                        id: 11,
                        q: "もし閏土が、現代の日本に生まれていたら、「私」と親友になれたかな？",
                        options: [
                            { type: 'money', label: "なれた", sub: "普通の友達になる", reason: "現代日本のように極端な貧困や飢餓がなければ、性格自体は合うはずだと考えているからです。邪魔をしていたのは環境（カネ）だけです。" },
                            { type: 'heart', label: "なれない", sub: "やっぱり話が合わない", reason: "結局、進学するコースや興味関心が違えば、話は合わなくなると考えているからです。人間としての「住む世界（価値観）」の違いは埋まりません。" }
                        ]
                    }
                ]
            },
            {
                category: "カテゴリーG：【希望の行方】ラストシーンをどう読む？",
                icon: "arrow-right",
                color: "text-cyan-600",
                items: [
                    {
                        id: 12,
                        q: "最後の「歩く人が多くなれば道になる」という希望。これを実現するために、一番必要なのは？",
                        options: [
                            { type: 'money', label: "豊かさ", sub: "政治が変わり経済が良くなる", reason: "貧困が解決しない限り、誰もが自分の生活で手一杯で、道を作る（新しい関係を築く）余裕なんて生まれないと捉えているからです。" },
                            { type: 'heart', label: "意識改革", sub: "偶像（迷信）を捨てること", reason: "いくら豊かになっても、差別意識や依存心がある限り、本当の「新しい生活」は来ないと捉えているからです。革命は心の中で起きるべきものです。" }
                        ]
                    },
                    {
                        id: 13,
                        q: "宏児と水生が、将来「厚い壁」を感じないために必要なアイテムは？",
                        options: [
                            { type: 'money', label: "ツール", sub: "スマホやチケット（カネ）", reason: "連絡を取り合ったり会いに行ったりする「経済的な余裕」さえあれば、関係は維持できると考えているからです。" },
                            { type: 'heart', label: "精神力", sub: "勇気や偏見のない心", reason: "親が決めた身分や格差を飛び越えるには、強い意志（心）が必要だと考えているからです。" }
                        ]
                    }
                ]
            },
            {
                category: "カテゴリーH：【私への疑惑】語り手を疑ってみる",
                icon: "help-circle",
                color: "text-rose-400",
                items: [
                    {
                        id: 14,
                        q: "「私」は楊おばさんを「コンパス」、閏土を「石像」と呼んだ。このあだ名についてどう思う？",
                        options: [
                            { type: 'money', label: "うまい例え", sub: "特徴を捉えてるな", reason: "「私」の視点を客観的で正しいものとして受け入れています。つまり、「私」のせいではなく、客観的な事実（貧困による変化）が原因だと考えがちです。" },
                            { type: 'heart', label: "ひどいな", sub: "見下してるな", reason: "「私」の中に、無自覚な差別意識や冷たさを感じ取っているからです。その「上から目線」こそが壁を作った犯人です。" }
                        ]
                    },
                    {
                        id: 15,
                        q: "「私」が故郷を離れる時、「名残惜しい気はしない」と言った。これは本心？",
                        options: [
                            { type: 'money', label: "本心", sub: "もう未練はない", reason: "故郷はもう「生きられない場所（貧困の地）」になってしまった。現実的に生活を立て直すには、捨てるしかないという判断です。" },
                            { type: 'heart', label: "強がり", sub: "本当は悲しい", reason: "期待していた「美しい故郷」が壊れてしまったことへの、精神的なショックを隠そうとしているからです。" }
                        ]
                    }
                ]
            }
        ];

        return (
            <div className="min-h-screen bg-slate-50 text-slate-800 font-sans pb-32">
                {/* Header */}
                <header className="bg-slate-800 text-white p-6 shadow-lg">
                    <div className="max-w-4xl mx-auto">
                        <div className="flex items-center gap-3 mb-2">
                            <Icon name="book-open" className="text-yellow-400 w-8 h-8" />
                            <h1 className="text-2xl md:text-3xl font-bold tracking-wider">『故郷』究極の質問リスト</h1>
                        </div>
                        <p className="text-slate-300 ml-1">
                            君の直感は「カネ派」？「心派」？ 答えを選べば、立論の根拠が見えてくる。
                        </p>
                    </div>
                </header>

                {/* Intro Stats */}
                <div className="max-w-4xl mx-auto px-4 py-6">
                    <div className="bg-white rounded-xl shadow-sm border border-slate-200 p-4 flex flex-col md:flex-row items-center justify-between gap-4">
                        <div className="flex items-center gap-3">
                            <div className="bg-emerald-100 p-2 rounded-full"><Icon name="banknote" className="text-emerald-600 w-6 h-6" /></div>
                            <div>
                                <span className="text-xs font-bold text-emerald-700 block">カネ（経済格差）派</span>
                                <span className="text-xs text-slate-500">壁の原因は「貧困・環境」</span>
                            </div>
                        </div>
                        <div className="h-px w-full md:w-px md:h-12 bg-slate-200"></div>
                        <div className="flex items-center gap-3">
                            <div className="bg-rose-100 p-2 rounded-full"><Icon name="heart" className="text-rose-500 w-6 h-6" /></div>
                            <div>
                                <span className="text-xs font-bold text-rose-700 block">心（精神格差）派</span>
                                <span className="text-xs text-slate-500">壁の原因は「心理・身分意識」</span>
                            </div>
                        </div>
                    </div>
                </div>

                {/* Main Content */}
                <main className="max-w-3xl mx-auto px-4 space-y-12">
                    {questions.map((category, idx) => (
                        <section key={idx} className="space-y-6">
                            <div className="flex items-center gap-3 border-b-2 border-slate-200 pb-2">
                                <Icon name={category.icon} className={`w-6 h-6 ${category.color}`} />
                                <h2 className="text-lg font-bold text-slate-700">{category.category}</h2>
                            </div>
                            
                            <div className="grid gap-6">
                                {category.items.map((item) => {
                                    const isAnswered = answers[item.id];
                                    const isExpanded = expandedCards[item.id];

                                    return (
                                        <div key={item.id} className={`bg-white rounded-xl shadow-sm border-2 transition-all duration-300 ${isAnswered ? 'border-slate-300' : 'border-slate-100 hover:border-slate-300'}`}>
                                            <div className="p-5">
                                                <div className="flex justify-between items-start gap-4 mb-4">
                                                    <h3 className="text-md font-bold text-slate-800 leading-relaxed">
                                                        <span className="inline-block bg-slate-100 text-slate-600 text-xs px-2 py-1 rounded mr-2 align-middle">Q{item.id}</span>
                                                        {item.q}
                                                    </h3>
                                                </div>

                                                <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                                                    {item.options.map((opt) => (
                                                        <button
                                                            key={opt.type}
                                                            onClick={() => handleAnswer(item.id, opt.type)}
                                                            className={`relative p-4 rounded-lg text-left transition-all duration-200 flex flex-col gap-1 border
                                                                ${answers[item.id] === opt.type 
                                                                    ? (opt.type === 'money' ? 'bg-emerald-50 border-emerald-500 ring-1 ring-emerald-500' : 'bg-rose-50 border-rose-500 ring-1 ring-rose-500')
                                                                    : 'bg-white border-slate-200 hover:bg-slate-50'
                                                                }
                                                                ${isAnswered && answers[item.id] !== opt.type ? 'opacity-50 grayscale' : ''}
                                                            `}
                                                        >
                                                            <div className="flex items-center justify-between w-full">
                                                                <span className={`font-bold text-lg ${opt.type === 'money' ? 'text-emerald-700' : 'text-rose-700'}`}>
                                                                    {opt.label}
                                                                </span>
                                                                {answers[item.id] === opt.type && (
                                                                    <span className="text-xs bg-slate-800 text-white px-2 py-0.5 rounded-full">選択中</span>
                                                                )}
                                                            </div>
                                                            <span className="text-sm text-slate-600">{opt.sub}</span>
                                                        </button>
                                                    ))}
                                                </div>
                                            </div>

                                            {/* Explanation Section */}
                                            {isAnswered && (
                                                <div className={`border-t border-slate-100 bg-slate-50 overflow-hidden transition-all duration-500 ${isExpanded ? 'max-h-96 opacity-100' : 'max-h-0 opacity-0'}`}>
                                                    <div className="p-5">
                                                        <div className="flex items-start gap-3">
                                                            <div className="mt-1 flex-shrink-0">
                                                                {answers[item.id] === 'money' 
                                                                    ? <div className="w-2 h-2 rounded-full bg-emerald-500 mt-2"></div>
                                                                    : <div className="w-2 h-2 rounded-full bg-rose-500 mt-2"></div>
                                                                }
                                                            </div>
                                                            <div>
                                                                <p className="text-xs font-bold text-slate-500 uppercase tracking-wider mb-1">
                                                                    👉 あなたは 【 {answers[item.id] === 'money' ? 'カネ（経済格差）派' : '心（精神格差）派'} 】
                                                                </p>
                                                                <p className="text-sm text-slate-700 leading-relaxed">
                                                                    <span className="font-bold text-slate-900">なぜなら：</span>
                                                                    {item.options.find(o => o.type === answers[item.id]).reason}
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            )}
                                            
                                            {isAnswered && (
                                                <button 
                                                    onClick={(e) => { e.stopPropagation(); toggleExpand(item.id); }}
                                                    className="w-full text-center py-1 text-xs text-slate-400 hover:text-slate-600 hover:bg-slate-50 border-t border-slate-100 flex items-center justify-center gap-1"
                                                >
                                                    {isExpanded ? <>解説を閉じる <Icon name="chevron-up" size={12} className="inline ml-1" /></> : <>解説を見る <Icon name="chevron-down" size={12} className="inline ml-1" /></>}
                                                </button>
                                            )}
                                        </div>
                                    );
                                })}
                            </div>
                        </section>
                    ))}
                </main>

                {/* Floating Status Bar */}
                <div className="fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] p-4 z-50">
                    <div className="max-w-3xl mx-auto">
                        {!showResult ? (
                            <div className="space-y-2">
                                <div className="flex justify-between text-xs font-bold uppercase tracking-wider text-slate-500 mb-1">
                                    <span className="flex items-center gap-1"><Icon name="banknote" size={14} className="text-emerald-600"/> カネ派: {scores.money}</span>
                                    <span>回答数: {scores.total} / 15</span>
                                    <span className="flex items-center gap-1">心派: {scores.heart} <Icon name="heart" size={14} className="text-rose-500"/></span>
                                </div>
                                
                                <div className="h-4 bg-slate-100 rounded-full overflow-hidden flex relative">
                                    <div className="absolute left-1/2 top-0 bottom-0 w-0.5 bg-slate-800 z-10 opacity-20"></div>
                                    
                                    <div 
                                        className="bg-emerald-500 transition-all duration-500 flex items-center justify-end pr-2 text-[10px] text-white font-bold"
                                        style={{ width: scores.total === 0 ? '50%' : `${(scores.money / (scores.money + scores.heart || 1)) * 100}%` }}
                                    >
                                    </div>
                                    <div 
                                        className="bg-rose-500 transition-all duration-500 flex items-center pl-2 text-[10px] text-white font-bold"
                                        style={{ width: scores.total === 0 ? '50%' : `${(scores.heart / (scores.money + scores.heart || 1)) * 100}%` }}
                                    >
                                    </div>
                                </div>

                                {scores.total === 15 && (
                                    <button 
                                        onClick={() => setShowResult(true)}
                                        className="w-full mt-2 bg-slate-800 text-white py-3 rounded-lg font-bold text-lg hover:bg-slate-700 transition-colors flex items-center justify-center gap-2 animate-bounce"
                                    >
                                        <Icon name="scale" className="w-5 h-5" />
                                        診断結果を見る
                                    </button>
                                )}
                            </div>
                        ) : (
                            <div className="animate-in slide-in-from-bottom duration-500">
                                <div className="flex justify-between items-start mb-4">
                                    <div>
                                        <h3 className="text-xl font-bold text-slate-800">
                                            あなたの結論：
                                            <span className={`ml-2 ${scores.money > scores.heart ? 'text-emerald-600' : scores.heart > scores.money ? 'text-rose-600' : 'text-slate-600'}`}>
                                                {scores.money > scores.heart ? '圧倒的「カネ（経済格差）」派' : scores.heart > scores.money ? '圧倒的「心（精神格差）」派' : 'バランス型（複合的要因）'}
                                            </span>
                                        </h3>
                                    </div>
                                    <button onClick={reset} className="text-slate-400 hover:text-slate-600 p-1"><Icon name="refresh-cw" size={20}/></button>
                                </div>
                                
                                <p className="text-sm text-slate-600 mb-4 bg-slate-50 p-3 rounded border border-slate-100">
                                    {scores.money > scores.heart 
                                        ? "あなたは、ルントウと「私」の壁の正体は「貧困という絶対的な暴力」だと捉えています。精神論ではなく、政治や経済が変わらなければ、希望の「道」は生まれないという現実的な視点を持っています。" 
                                        : scores.heart > scores.money 
                                        ? "あなたは、壁の正体は「人間の心に巣食う差別や古い慣習」だと捉えています。いくら金持ちになっても、心が自由にならなければ、真の友情は生まれないという倫理的な視点を持っています。"
                                        : "あなたは、経済的な苦しさと精神的な隔たりが複雑に絡み合っていると捉えています。どちらか一方だけでは解決できない、根深い問題として作品を読んでいます。"}
                                </p>
                            </div>
                        )}
                    </div>
                </div>
            </div>
        );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<HometownDiagnosis />);
</script>
</body>
</html>
