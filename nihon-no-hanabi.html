<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¥æœ¬ã®èŠ±ç«ã®æ¥½ã—ã¿ - èª­è§£å­¦ç¿’</title>
    
    <!-- Tailwind CSS (ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ç”¨) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Vue.js 3 (ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯) -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    
    <!-- Google Fonts (å¯èª­æ€§ã®é«˜ã„ãƒ•ã‚©ãƒ³ãƒˆ) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=Shippori+Mincho:wght@400;600&display=swap" rel="stylesheet">

    <!-- ã‚«ã‚¹ã‚¿ãƒ è¨­å®šã¨ã‚¹ã‚¿ã‚¤ãƒ« -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'brand-dark': '#0f172a', // å¤œç©ºã®ã‚ˆã†ãªæ¿ƒç´º
                        'brand-accent': '#fbbf24', // èŠ±ç«ã®ã‚ˆã†ãªé‡‘è‰²
                        'brand-text': '#e2e8f0',
                        'paper': '#f8fafc',
                        'ink': '#1e293b'
                    },
                    fontFamily: {
                        sans: ['"Noto Sans JP"', 'sans-serif'],
                        serif: ['"Shippori Mincho"', 'serif'],
                    }
                }
            }
        }
    </script>

    <style>
        /* ãƒ™ãƒ¼ã‚¹ã‚¹ã‚¿ã‚¤ãƒ« */
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f8fafc; /* ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰èƒŒæ™¯ */
            color: #334155;
        }

        /* æœ¬æ–‡è¡¨ç¤ºã‚¨ãƒªã‚¢ã®ç‰¹åˆ¥ã‚¹ã‚¿ã‚¤ãƒ« */
        .prose-content {
            font-family: 'Shippori Mincho', serif;
            line-height: 2.2;
            letter-spacing: 0.05em;
            font-size: 1.125rem;
        }

        /* æœ¬æ–‡ä¸­ã®å¼·èª¿å˜èªã‚¹ã‚¿ã‚¤ãƒ« */
        .interactive-word {
            border-bottom: 2px solid #fbbf24;
            background-color: rgba(251, 191, 36, 0.1);
            cursor: pointer;
            transition: all 0.2s;
            padding: 0 2px;
            border-radius: 2px;
            font-weight: 600;
        }
        .interactive-word:hover {
            background-color: #fbbf24;
            color: #0f172a;
        }

        /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        /* ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .fade-enter-active, .fade-leave-active {
            transition: opacity 0.3s ease;
        }
        .fade-enter-from, .fade-leave-to {
            opacity: 0;
        }
    </style>
</head>
<body class="antialiased">

    <div id="app" class="flex flex-col min-h-screen">
        
        <!-- 1. ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ˜ãƒƒãƒ€ãƒ¼ (å›ºå®šè¡¨ç¤º) -->
        <header class="sticky top-0 z-50 bg-brand-dark text-white shadow-lg backdrop-blur-sm bg-opacity-95">
            <div class="container mx-auto px-4 py-3 flex flex-col md:flex-row justify-between items-center">
                <!-- ã‚¿ã‚¤ãƒˆãƒ«ã‚¨ãƒªã‚¢ -->
                <div class="text-center md:text-left mb-2 md:mb-0">
                    <h1 class="text-lg font-bold tracking-wider text-brand-accent">{{ workTitle }}</h1>
                    <p class="text-xs text-slate-400">{{ authorName }}</p>
                </div>

                <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
                <nav class="flex space-x-1 md:space-x-4 text-xs md:text-sm overflow-x-auto w-full md:w-auto pb-1 md:pb-0 justify-center">
                    <button 
                        v-for="view in views" 
                        :key="view.id"
                        @click="changeView(view.id)"
                        :class="[
                            'px-3 py-2 rounded-full transition-colors whitespace-nowrap',
                            currentView === view.id 
                                ? 'bg-brand-accent text-brand-dark font-bold' 
                                : 'text-slate-300 hover:bg-slate-700'
                        ]"
                    >
                        {{ view.label }}
                    </button>
                </nav>
            </div>
        </header>

        <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ -->
        <main class="flex-grow container mx-auto px-4 py-8 max-w-4xl relative">
            
            <!-- VIEW 1: å¤§ã¾ã‹ãªå†…å®¹ (Structure/Overview) -->
            <div v-if="currentView === 'overview'" class="animate-fade-in space-y-8">
                <div class="bg-white p-6 rounded-xl shadow-md border-l-4 border-brand-accent">
                    <h2 class="text-2xl font-bold mb-4 flex items-center">
                        <span class="text-3xl mr-2">ğŸ“–</span> ä½œå“ã®å…¨ä½“åƒ
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-6">
                        ã“ã®æ–‡ç« ã¯ã€æ—¥æœ¬ã®èŠ±ç«ãŒæŒã¤ç‹¬ç‰¹ã®ç¾æ„è­˜ã¨ã€ãã‚Œã‚’æ”¯ãˆã‚‹èŠ±ç«å¸«ã®æŠ€è¡“ã‚„ç²¾ç¥æ€§ã«ã¤ã„ã¦è§£èª¬ã—ãŸã‚‚ã®ã§ã™ã€‚
                        ç‰©ç†çš„ãªæ§‹é€ ï¼ˆç§‘å­¦ï¼‰ã¨ã€æ—¥æœ¬äººã®æ„Ÿæ€§ï¼ˆæƒ…ç·’ï¼‰ã®ä¸¡é¢ã‹ã‚‰ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã—ã¦ã„ã¾ã™ã€‚
                    </p>
                    <div class="flex flex-wrap gap-2">
                        <span v-for="tag in overviewTags" class="bg-slate-100 text-slate-600 px-3 py-1 rounded-full text-sm font-medium">#{{ tag }}</span>
                    </div>
                </div>

                <!-- æ§‹æˆã®ã‚¤ãƒ³ãƒ•ã‚©ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯é¢¨ãƒªã‚¹ãƒˆ -->
                <div class="space-y-4">
                    <h3 class="text-xl font-bold text-slate-700 ml-2">æ§‹æˆãƒ•ãƒ­ãƒ¼</h3>
                    <div v-for="(part, index) in structureParts" :key="index" 
                         class="bg-white p-5 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer group"
                         @click="part.isOpen = !part.isOpen">
                        <div class="flex justify-between items-center">
                            <div class="flex items-center">
                                <span class="bg-brand-dark text-white w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm mr-4">{{ index + 1 }}</span>
                                <h4 class="font-bold text-lg text-slate-800">{{ part.title }}</h4>
                            </div>
                            <span class="text-slate-400 group-hover:text-brand-accent transition-colors">
                                {{ part.isOpen ? 'â–²' : 'â–¼' }}
                            </span>
                        </div>
                        <div v-show="part.isOpen" class="mt-4 pl-12 text-slate-600 border-l-2 border-slate-100 ml-4">
                            <p class="mb-2 font-medium text-brand-dark">{{ part.summary }}</p>
                            <p class="text-sm leading-relaxed">{{ part.detail }}</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- VIEW 2: ç™»å ´äººç‰©ãƒ»è¦ç´ åˆ†æ (Elements) -->
            <div v-if="currentView === 'elements'" class="animate-fade-in">
                <h2 class="text-2xl font-bold mb-6 text-slate-800">æ§‹æˆè¦ç´ ã®åˆ†æ</h2>
                <div class="grid md:grid-cols-2 gap-6">
                    <div v-for="element in elements" :key="element.name" 
                         class="bg-white rounded-xl shadow-md overflow-hidden cursor-pointer transform hover:-translate-y-1 transition-transform duration-300"
                         @click="openElementModal(element)">
                        <div class="bg-slate-100 p-4 border-b border-slate-200">
                            <h3 class="font-bold text-xl text-brand-dark">{{ element.name }}</h3>
                            <p class="text-xs text-slate-500 font-serif">{{ element.subTitle }}</p>
                        </div>
                        <div class="p-5">
                            <p class="text-slate-600 line-clamp-3 text-sm mb-3">{{ element.description }}</p>
                            <div class="text-right">
                                <span class="text-brand-accent font-bold text-sm hover:underline">è©³ç´°ã‚’è¦‹ã‚‹ &rarr;</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- VIEW 3: é‡è¦ãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ (Keywords) -->
            <div v-if="currentView === 'keywords'" class="animate-fade-in">
                <h2 class="text-2xl font-bold mb-6 text-slate-800">ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒ»å°‚é–€ç”¨èª</h2>
                <div class="space-y-3">
                    <div v-for="keyword in keywords" :key="keyword.term" 
                         class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden">
                        <button class="w-full text-left px-6 py-4 flex justify-between items-center hover:bg-slate-50 transition-colors"
                                @click="toggleKeyword(keyword)">
                            <div class="flex items-baseline">
                                <span class="text-lg font-bold text-brand-dark mr-3">{{ keyword.term }}</span>
                                <span class="text-xs text-slate-500 bg-slate-100 px-2 py-0.5 rounded">{{ keyword.category }}</span>
                            </div>
                            <span class="text-slate-400 text-sm">{{ keyword.isOpen ? 'é–‰ã˜ã‚‹' : 'è§£èª¬ã‚’é–‹ã' }}</span>
                        </button>
                        <div v-show="keyword.isOpen" class="px-6 py-6 bg-slate-50 border-t border-slate-100">
                            <div class="mb-4">
                                <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-1">æ„å‘³ãƒ»å®šç¾©</h4>
                                <p class="text-slate-800 font-medium leading-relaxed">{{ keyword.definition }}</p>
                            </div>
                            <div class="mb-4">
                                <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-1">æ–‡è„ˆã§ã®é‡è¦æ€§</h4>
                                <p class="text-sm text-slate-600 leading-relaxed">{{ keyword.context }}</p>
                            </div>
                            <div v-if="keyword.linkId" class="text-right">
                                <button @click="jumpToText(keyword.term)" class="text-xs text-brand-accent hover:text-orange-500 font-bold">
                                    æœ¬æ–‡ã®è©²å½“ç®‡æ‰€ã‚’æ¢ã™ (æ¤œç´¢)
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- VIEW 4: æœ¬æ–‡ã‚’èª­ã‚€ (Read Text) -->
            <div v-if="currentView === 'read'" class="animate-fade-in pb-32">
                <div class="bg-white px-6 py-10 md:px-12 md:py-16 shadow-lg rounded-sm max-w-3xl mx-auto">
                    <h2 class="text-3xl font-serif font-bold mb-2 text-center text-ink">{{ workTitle }}</h2>
                    <p class="text-right text-sm text-slate-500 mb-12 font-serif">{{ authorName }}</p>
                    
                    <!-- æœ¬æ–‡ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚¨ãƒªã‚¢ -->
                    <div class="prose-content space-y-6 text-justify">
                        <!-- æ®µè½ã”ã¨ã«ç”Ÿæˆ -->
                        <p v-for="(para, idx) in processedParagraphs" 
                           :key="idx" 
                           v-html="para"
                           @click="handleTextClick"
                           class="mb-6 indent-4">
                        </p>
                    </div>
                </div>
                
                <!-- èª­æ›¸ä½ç½®ä¿å­˜ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ -->
                <div v-if="scrollSavedMessage" class="fixed top-20 right-4 bg-green-500 text-white text-xs px-3 py-1 rounded shadow-lg animate-bounce">
                    èª­æ›¸ä½ç½®ã‚’ä¿å­˜ã—ã¾ã—ãŸ
                </div>
            </div>

        </main>

        <!-- 3. è©³ç´°æƒ…å ±ãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆ/ãƒ¢ãƒ¼ãƒ€ãƒ« (ç”¨èªè§£èª¬ãªã©) -->
        <div v-if="activeAnnotation" 
             class="fixed bottom-0 left-0 right-0 z-50 p-4 transform transition-transform duration-300"
             :class="activeAnnotation ? 'translate-y-0' : 'translate-y-full'">
            <div class="bg-brand-dark text-white rounded-xl shadow-2xl max-w-2xl mx-auto overflow-hidden border border-slate-700">
                <div class="p-5">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <span class="text-xs text-brand-accent block mb-1">{{ activeAnnotation.reading }}</span>
                            <h3 class="text-2xl font-bold">{{ activeAnnotation.phrase }}</h3>
                        </div>
                        <button @click="activeAnnotation = null" class="text-slate-400 hover:text-white bg-slate-800 rounded-full w-8 h-8 flex items-center justify-center">âœ•</button>
                    </div>
                    <p class="text-slate-300 text-sm leading-relaxed mb-3">{{ activeAnnotation.meaning }}</p>
                    <div class="bg-slate-800 p-3 rounded text-xs text-slate-400 italic">
                        <span class="font-bold not-italic text-slate-300">è£œè¶³:</span> {{ activeAnnotation.note }}
                    </div>
                </div>
            </div>
        </div>

        <!-- 2. è©³ç´°è§£èª¬ãƒ¢ãƒ¼ãƒ€ãƒ« (è¦ç´ åˆ†æç”¨) -->
        <div v-if="activeModalElement" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4" @click.self="activeModalElement = null">
            <div class="bg-white rounded-lg shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto">
                <div class="bg-brand-dark p-6 text-white sticky top-0">
                    <h3 class="text-2xl font-bold">{{ activeModalElement.name }}</h3>
                    <p class="text-brand-accent text-sm">{{ activeModalElement.subTitle }}</p>
                    <button @click="activeModalElement = null" class="absolute top-4 right-4 text-slate-400 hover:text-white">âœ•</button>
                </div>
                <div class="p-6 space-y-6">
                    <div>
                        <h4 class="font-bold text-slate-800 border-b pb-2 mb-2">è©³ç´°è§£èª¬</h4>
                        <p class="text-slate-600 text-sm leading-relaxed">{{ activeModalElement.detail }}</p>
                    </div>
                    <div class="bg-slate-50 p-4 rounded border-l-4 border-brand-accent">
                        <h4 class="font-bold text-xs text-slate-400 uppercase mb-2">æœ¬æ–‡ã‚ˆã‚Šå¼•ç”¨</h4>
                        <p class="font-serif italic text-slate-700">"{{ activeModalElement.quote }}"</p>
                    </div>
                    <div>
                        <h4 class="font-bold text-slate-800 border-b pb-2 mb-2">å¤‰åŒ–ãƒ»ç‰¹å¾´ã®ãƒã‚¤ãƒ³ãƒˆ</h4>
                        <ul class="list-disc list-inside text-sm text-slate-600 space-y-1">
                            <li v-for="point in activeModalElement.points">{{ point }}</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        const { createApp, ref, computed, onMounted, nextTick, watch } = Vue;

        /* * ==========================================
         * 1. ä½œå“ãƒ‡ãƒ¼ã‚¿ï¼ˆç·¨é›†ã‚¨ãƒªã‚¢ï¼‰
         * ==========================================
         */
        
        // åŸºæœ¬æƒ…å ±
        const WORK_TITLE = "æ—¥æœ¬ã®èŠ±ç«ã®æ¥½ã—ã¿";
        const AUTHOR_NAME = "å°é‡é‡Œ å…¬æˆ";

        // æœ¬æ–‡ãƒ‡ãƒ¼ã‚¿ (æ®µè½ã”ã¨ã®é…åˆ—)
        const TEXT_PARAGRAPHS = [
            "æ—¥æœ¬ã§ã¯ã€å¤ã‚’ä¸­å¿ƒã«ä¸€å¹´ã‚’é€šã—ã¦èŠ±ç«å¤§ä¼šãŒé–‹å‚¬ã•ã‚Œã¦ã„ã‚‹ã€‚ãã®æ•°ã¯ä¸»ã ã£ãŸã‚‚ã®ã ã‘ã§ã‚‚åƒã‹æ‰€ä»¥ä¸Šã«ä¸Šã‚Šã€ã„ãšã‚Œã‚‚æ•°åƒã‹ã‚‰æ•°ä¸‡äººã®è¦³å®¢ãŒã¤ã‚ã‹ã‘ã¦èŠ±ç«ã‚’é‘‘è³ã™ã‚‹ã€‚èŠ±ç«ãŒæ—¥æœ¬äººã‚’ã“ã‚Œã»ã©ã¾ã§ã«ã²ãã¤ã‘ã‚‹ã®ã¯ã€ã©ã†ã—ã¦ãªã®ã ã‚ã†ã‹ã€‚",
            "ç¾åœ¨ã¯ã€æ¬§ç±³ã®èŠ±ç«å¤§ä¼šã®ã‚ˆã†ã«å¤§é‡ã®èŠ±ç«ã‚’é€£ç¶šã—ã¦æ‰“ã¡ä¸Šã’ã‚‹æ–¹æ³•ãŒäººæ°—ã‚’åšã—ã¦ã„ã‚‹ã€‚ã—ã‹ã—åŸºæœ¬çš„ã«ã¯ã€ä¸€ç™ºãšã¤ã®èŠ±ç«ã‚’ã˜ã£ãã‚Šé‘‘è³ã§ãã‚‹æ‰“ã¡ä¸Šã’æ–¹æ³•ãŒæ—¥æœ¬ã®èŠ±ç«å¤§ä¼šã®ä¸»æµã ã€‚ã‚†ãˆã«æ—¥æœ¬ã®èŠ±ç«ã¯ã€ä¸€ç™ºã®ã§ãã°ãˆã‚’æ¥µé™ã¾ã§è¿½æ±‚ã—ã¦é€²åŒ–ã—ã¦ããŸã€‚ãã®ç‰¹å¾´ã¯ã€æ•´ã£ãŸå½¢ã¨ã€æ˜ç­ãªè‰²å½©ãŒå¤‰åŒ–ã™ã‚‹ã•ã¾ã«ã‚ã‚Šã€ãã“ã«äººã¯ç¾ã—ã•ã¨é­…åŠ›ã‚’è¦‹ã„ã ã™ã®ã ã¨æ€ã†ã€‚",
            "æ‰“ã¡ä¸Šã’å‰ã®èŠ±ç«ç‰ã¯ä¸¸ã„çƒä½“ã§ã€ä¸­ã«å…‰ã‚„è‰²ã‚’ç™ºã™ã‚‹ã€Œæ˜Ÿã€ã¨ã€èŠ±ç«ç‰ã‚’å‰²ã£ã¦æ˜Ÿã‚’é ãé£›æ•£ã•ã›ã‚‹ãŸã‚ã®ã€Œå‰²ç«è–¬ã€ãŒå±¤ã‚’ãªã—ã¦å…¥ã£ã¦ã„ã‚‹ã€‚ä¸Šç©ºã§ç ´è£‚ã™ã‚‹ã¨ã€ä¸€ç¬ã§ç«è–¬ã®ç‡ƒç„¼ã«ã‚ˆã‚‹èŠ±ãŒå¤§ããæ•´ã£ãŸçƒä½“ã«åºƒãŒã‚‹ã€‚ã“ã‚ŒãŒã€Œå‰²ç‰©ã€ã¨å‘¼ã°ã‚Œã‚‹èŠ±ç«ã§ã€é£›ã³æ•£ã‚‹æ˜Ÿã¯å…‰ã®ç²’ã¨ãªã£ã¦æ˜ã‚‹ãå¤šå½©ãªè‰²ã‚’æ”¾ã¤ã€‚ãã—ã¦ã€ãã®è‰²ãŒä½•åº¦ã¨ãªãç§»ã‚Šå¤‰ã‚ã‚‹ã¨ã„ã†å¤‰è‰²ã®ã—ã‹ã‘ã‚’å‚™ãˆã¦ã„ã‚‹ã€‚ã“ã‚Œã¯ã€ç™ºè‰²ã®é•ã†ç«è–¬ãŒäºŒé‡ä¸‰é‡ã®å±¤ã«ãªã£ã¦ã„ã‚‹ãŸã‚ã§ã‚ã‚‹ã€‚",
            "ã€Œå‰²ç‰©ã€ã®ä¸­ã§ã‚‚ã€çƒä½“ã®å†…å´ã«ã•ã‚‰ã«ã€ŒèŠ¯ã€ã¨å‘¼ã°ã‚Œã‚‹çƒä½“ã‚’ä¸€ã¤ã€ã¾ãŸã¯è¤‡æ•°å…¥ã‚Œè¾¼ã‚“ã ã€ŒèŠ¯ç‰©ã€ã¨ã„ã†ç¨®é¡ã®èŠ±ç«ãŒã‚ã‚‹ã€‚ã“ã‚Œã¯ã€è£½ä½œã«å¤§å¤‰æ‰‹é–“ãŒã‹ã‹ã‚‹ã“ã¨ã‹ã‚‰ã€é«˜ã„å“è³ªã‚’ç¶­æŒã™ã‚‹ã“ã¨ãŒé›£ã—ã„ã€‚ãã‚Œã‚’å¯èƒ½ã«ã—ã¦ããŸã®ãŒã€ã€ŒèŠ±ç«å¸«ã€ã¨å‘¼ã°ã‚Œã‚‹è·äººãŒã‚‚ã¤é«˜ã„æŠ€è¡“ã¨ã‚ˆã‚Šã‚ˆã„èŠ±ç«ã‚’æ¢æ±‚ã™ã‚‹ç²¾ç¥ã ã€‚",
            "èŠ±ç«å¸«ãŸã¡ã¯ã€èŠ±ç«ã‚’ä½œã‚Šã€ãã‚Œã‚’æ‰“ã¡ä¸Šã’ã‚‹ã“ã¨ã‚’ä»•äº‹ã¨ã™ã‚‹ã€‚å±é™ºãªç«è–¬ã‚’å–ã‚Šæ‰±ã†ãŸã‚ã€è£½ä½œæ™‚ã«ã‚‚æ‰“ã¡ä¸Šã’æ™‚ã«ã‚‚å®‰å…¨ã«é…æ…®ã—ãªãŒã‚‰ã€æ—¥ã€…ã€æ–°ã—ã„èŠ±ç«ã®å‰µä½œã«æ‰“ã¡è¾¼ã‚“ã§ã„ã‚‹ã€‚",
            "èŠ±ç«å¸«ã«ã‚ˆã‚‹ã¨ã€ç†æƒ³ã¨ã™ã‚‹èŠ±ç«ã®å§¿ã¯ã€ã‚†ãŒã¿ãªãã¾ã‚“ä¸¸ãå¤§ããé–‹ã„ãŸã‚‚ã®ã ã¨ã„ã†ã€‚ç ´ç¶»ã®ãªã„ä¸¸ã•ã¯ã€æ—¥æœ¬ã®èŠ±ç«ã®æœ€å¤§ã®ç‰¹å¾´ã¨ã—ã¦è¿½æ±‚ã•ã‚Œã¦ããŸè¦ç´ ã ã€‚ã•ã‚‰ã«ã€ã¯ã£ãã‚Šã—ãŸç™ºè‰²ã§ä¸€æ–‰ã«å¤‰è‰²ã—ã€ä¸€æ–‰ã«æ¶ˆãˆã‚‹ã€‚èŠ¯ç‰©ã®å ´åˆã¯ã€èŠ¯ã®éƒ¨åˆ†å…¨ä½“ãŒã§ãã‚‹ã ã‘ä¸¸ãå¤§ããé–‹ãã€ãã®ä¸­å¿ƒãŒä¸€ç‚¹ã«åˆã‚ã•ã‚‹ã€‚ãã‚Œãã‚Œã®æ¡ä»¶ã¯å˜ç´”ã ãŒã€åŒã˜ã‚ˆã†ã«ç´°å¿ƒã®ä½œæ¥­ã‚’ã—ã¦ã‚‚ã€å…¨ã¦ã‚’æº€ãŸã™æº€è¶³ã®ã„ãèŠ±ç«ç‰ã¯ã€å¹´ã«æ•°ãˆã‚‹ã»ã©ã—ã‹ç”Ÿã¾ã‚Œãªã„ã¨ã®ã“ã¨ã§ã‚ã‚‹ã€‚",
            "å½¢ã®ä¹±ã‚Œã‚„ã‚†ãŒã¿ã¯ã€è¦‹ãŸç›®ã®ç¾ã—ã•ã‚’åŠæ¸›ã•ã›ã‚‹ã€‚èŠ±ç«ä½œã‚Šã¯ã€å†…åŒ…ã™ã‚‹éƒ¨å“ä½œã‚Šã‹ã‚‰çµ„ã¿ç«‹ã¦ã«ã„ãŸã‚‹ã¾ã§ã»ã¨ã‚“ã©ãŒæ‰‹ä½œæ¥­ã§ã€ãã®è‰¯ã—ã‚ã—ã‚„ç²¾åº¦ãŒã€é–‹èŠ±ã—ãŸæ™‚ã®å§¿ã«å¤§ããå½±éŸ¿ã™ã‚‹ã€‚ä¸å¯§ãªä½œæ¥­ã‚’ç©ã¿é‡ã­ã‚‹ã“ã¨ã§ã€ç†æƒ³ã®å§¿ã«è¿‘ã¥ã‘ã¦ã„ãã®ã ã¨èŠ±ç«å¸«ã¯è¨€ã†ã€‚",
            "å¤§ããæ•´ã£ãŸçƒä½“ã¨ãªã£ã¦é–‹èŠ±ã™ã‚‹ãŸã‚ã«ã¯ã€èŠ±ç«ç‰ã‚’ã€ä¸Šæ˜‡ã‹ã‚‰è½ä¸‹ã«è»¢ãšã‚‹ä¸€ç¬æ­¢ã¾ã£ãŸæ™‚ã«é–‹ã‹ã›ã‚‹ã“ã¨ãŒæ¬ ã‹ã›ãªã„ã€‚å‹•ãã®é€”ä¸­ã§é–‹ãã¨ã€èŠ±ã®å½¢ãŒã‚†ãŒã‚“ã§ä¸¸ãé–‹ã‹ãªã„ã€‚ã“ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’åˆã‚ã›ã‚‹ãŸã‚ã«ã€æ‰“ã¡ä¸Šã’ã‚‹æŠ€è¡“ã«ã‚‚æ°—ã‚’é…ã‚‹ã€‚",
            "èŠ±ç«ç‰ãŒé–‹ã„ã¦ã€æ˜ŸãŒä¸€æ–‰ã«é£›ã³æ•£ã£ã¦ä½œã‚‹å…¨ä½“ã®å½¢ã®ã“ã¨ã‚’ã€Œç›†ã€ã¨ã„ã†ã€‚èŠ±ç«ãŒé–‹ãæ™‚ã®ç›´å¾„ã¯ã€èŠ±ç«ç‰ã®å¤§ãã•ã§ãŠãŠã‚ˆãæ±ºã¾ã£ã¦ã„ã‚‹ãŒã€ãã‚Œã‚’ã‚ˆã‚Šå¤§ããè¦‹ã›ã€ç†æƒ³çš„ãªç›†ã«ã™ã‚‹ãŸã‚ã«ã€æ˜Ÿã‚’æ­£ç¢ºã«æ•·ãè©°ã‚ã€åŠ ãˆã¦ã€å‰²ç«è–¬ã®çˆ†ç™ºåŠ›ã¨ã€ç‰çš®ã®å¼·åº¦ãªã©ã®ãƒãƒ©ãƒ³ã‚¹ã‚’è¿½ã„æ±‚ã‚ã‚‹ã€‚",
            "èŠ±ã®èŠ±å¼ã‚„èŠ¯ã«ãªãã‚‰ãˆã‚‰ã‚Œã‚‹æ˜Ÿã¯ã€èŠ±ç«ã®å‘½ã¨ã„ã‚ã‚Œã‚‹ã€‚å…¨ã¦ã®æ˜ŸãŒä¸€ç³¸ä¹±ã‚Œãšå‡ç­‰ã«é£›ã³ã€åŒæ™‚ã«å¤‰è‰²ã—ã€æ¶ˆãˆãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚å†…åŒ…ã™ã‚‹æ•°ç™¾ã®æ˜Ÿã‚’å‡è³ªã«ä»•ä¸Šã’ã‚‹ãŸã‚ã«ã€èŠ±ç«å¸«ã¯æ˜Ÿã®è£½ä½œã«æœ€ã‚‚ç¥çµŒã‚’ã¤ã‹ã†ã€‚å½¢ã‚„ç‡ƒãˆæ–¹ã«ãµãã‚ã„ãŒã‚ã‚Œã°ã€ãã®æ˜Ÿã¯ã¾ã£ã™ãã«é£›ã°ãªã„ã€‚ã„ãã¤ã‹ã®æ˜ŸãŒè›‡è¡Œã™ã‚‹ã“ã¨ã‚’ã€Œæ˜ŸãŒæ³³ãã€ã€ç€ç«ã—ãªã„æ˜ŸãŒã‚ã£ã¦å‡ç­‰ã«åºƒãŒã£ãŸå…‰ã®ä¸€éƒ¨ãŒæ¬ ã‘ã‚‹ã“ã¨ã‚’ã€ŒæŠœã‘æ˜Ÿã€ã¨ã„ã†ã€‚ã„ãšã‚Œã‚‚ã€ç†æƒ³ã¨ã™ã‚‹èŠ±ç«ã®å§¿ã‚’ç ´ç¶»ã•ã›ã¦ã—ã¾ã†è¦å› ã«ãªã‚‹ã€‚",
            "ãã‚Œãã‚Œã®æ˜Ÿã®è‰²åˆã„ã‚„å¤‰è‰²ã®å…·åˆã‚‚ã€è¦³å®¢ã®ç›®ã‚’æ¥½ã—ã¾ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ã‹ã©ã†ã‹ã«å½±éŸ¿ã™ã‚‹ã€‚èŠ±ç«ã®å®Œæˆåº¦ã‚’é«˜ã‚ã‚‹ãŸã‚ã«ã¯ã€è‰²ã®å¤‰åŒ–ã®å¤šã•ã ã‘ã§ã¯ãªãã€ç†æƒ³ã®è‰²ã«è¦‹ãˆã‚‹ã‹ã€ã¾ãŸã€è¶³ä¸¦ã¿ãŒãã‚ã£ã¦åŒæ™‚ã«å¤‰åŒ–ã—ã¦ã„ã‚‹ã‹ãŒé‡è¦ã ã€‚",
            "èŠ±ç«ãŒæ¶ˆãˆã‚‹æ™‚ã«ã¯ã€å…¨ã¦ã®æ˜ŸãŒä¸€ã¤ã‚‚æ®‹ã‚‰ãšä¸€æ–‰ã«ç‡ƒãˆå°½ãã¦ã€å…¨ä½“ãŒä¸€ç¬ã§æ¶ˆãˆã‚‹ã®ãŒç†æƒ³ã§ã€ã“ã‚Œã‚’ã€Œæ¶ˆãˆå£ãŒã‚ˆã„ã€ã¨è©•ä¾¡ã™ã‚‹ã€‚æ¶ˆãˆéš›ã®ã‚ˆã„èŠ±ç«ã¯å¼·çƒˆãªä½™éŸ»ã‚’æ®‹ã—ã€é–‹ã„ã¦ã„ã‚‹æ™‚ã®è¯ã‚„ã‹ã•ã¨ã®è½å·®ãŒã€ã‚ˆã‚Šé®®çƒˆãªå°è±¡ã¨ã¯ã‹ãªã•ã‚’è¦‹ã‚‹è€…ã®å¿ƒã«ç„¼ãã¤ã‘ã‚‹ã€‚èŠ±ç«å¸«ãŒä¸¹ç²¾ã‚’ã“ã‚ã¦ä½œã£ãŸèŠ±ç«ã¯ã€ã“ã†ã—ã¦å¤œç©ºã§å’²ãã€æ¶ˆãˆå»ã‚‹æ™‚ã«ã‚ˆã†ã‚„ãå®Œçµã™ã‚‹èŠ¸è¡“ã¨ãªã‚‹ã®ã ã€‚",
            "ç¾åœ¨ã®èŠ±ç«å¤§ä¼šã§ã¯ã€ä¸€ç™ºã®ã§ãã°ãˆã¯ã‚‚ã¡ã‚ã‚“ã®ã“ã¨ã€ãã‚Œã‚’é€£ç¶šã—ã¦æ‰“ã¡ä¸Šã’ã‚‹æ™‚ã®çµ„ã¿åˆã‚ã›ã‚„ãƒªã‚ºãƒ ã¨ã„ã£ãŸæ¼”å‡ºé¢ã‚‚ã€è¦³å®¢ã‚’æ¥½ã—ã¾ã›ã‚‹ã¨ã„ã†è¦³ç‚¹ã‹ã‚‰é‡è¦ã¨ãªã£ã¦ã„ã‚‹ã€‚ã•ã‚‰ã«ã€è¿½ã„æ±‚ã‚ã¦ããŸä¸¸ãé–‹ãèŠ±ç«ã ã‘ã§ãªãã€ãã®æŠ€è¡“ã‚’ã‚‚ã¨ã«ã€ã•ã¾ã–ã¾ãªå½¢ã‚„ã“ã‚Œã¾ã§ã«ãªã„å‹•ãã‚’ã™ã‚‹èŠ±ç«ã‚‚ç”Ÿã¿å‡ºã•ã‚Œç¶šã‘ã¦ã„ã‚‹ã€‚",
            "ã“ã†ã—ã¦ã€ç†Ÿç·´ã•ã‚ŒãŸèŠ±ç«å¸«ã«ã‚ˆã£ã¦ä½œã‚‰ã‚Œã‚‹æ—¥æœ¬ã®èŠ±ç«ã¯ã€ä¸–ç•Œã«èª‡ã‚‹ã“ã¨ã®ã§ãã‚‹æ°´æº–ã¨ãªã£ã¦ã„ã‚‹ã€‚ã ãŒã€èª°ã‚‚ãŒãã®ä»•çµ„ã¿ã‚„ä¾¡å€¤ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã«ã€èŠ±ç«ã‚’è¦‹ã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªã„ã ã‚ã†ã€‚èŠ±ç«ã¯ã€å¤§ããªéŸ³ã¨ã¨ã‚‚ã«è¯ã‚„ã‹ã«å¤œç©ºã«å’²ãã€ãã®ç›´å¾Œã«ã¯è·¡å½¢ã‚‚ãªãæ¶ˆãˆã¦ãªããªã£ã¦ã—ã¾ã†ã€‚ãã®å°è±¡ãŒã€å¿ƒã®ä¸­ã«ã®ã¿æ®‹ã‚‹ã®ã§ã€äººã€…ã¯ä½•åº¦ã‚‚è¦‹ãŸã„ã¨æ€ã†ã®ã ã‚ã†ã€‚ãã®ä¸€ç¬ã®æˆæœã®èƒŒå¾Œã«ã¯ã€èŠ±ç«å¸«ãŸã¡ã®é«˜ã„æŠ€è¡“ãŒéš ã•ã‚Œã¦ã„ã‚‹ã€‚å¤æ¥ã‚ˆã‚Šã€æƒ…ç·’ã€é¢¨æƒ…ã¨ã„ã£ãŸæ„Ÿè¦šã‚’ã‚ˆãç†è§£ã—ã€æ±‚ã‚ã‚‹æ—¥æœ¬äººã«ã¨ã£ã¦ã€è¯ã‚„ã‹ã•ã¨ã¯ã‹ãªã•ã¨ã‚’åŒæ™‚ã«å‘³ã‚ãˆã‚‹èŠ±ç«ã¯ã€å®Ÿã«ç´ç·šã«ãµã‚Œã‚‹ã€å‘³ã‚ã„ã«å¯Œã‚“ã èŠ¸è¡“ãªã®ã ã¨æ€ã†ã€‚"
        ];

        // æ³¨é‡ˆãƒ‡ãƒ¼ã‚¿ (æœ¬æ–‡ä¸­ã®å¼·èª¿è¡¨ç¤ºã¨ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ç”¨)
        const ANNOTATIONS = [
            { phrase: "å‰²ç‰©", reading: "ã‚ã‚Šã‚‚ã®", meaning: "æ—¥æœ¬ã®ä»£è¡¨çš„ãªæ‰“ã¡ä¸Šã’èŠ±ç«ã®ç¨®é¡ã€‚çƒçŠ¶ã®ç‰ã®ä¸­ã«æ˜Ÿã¨å‰²ç«è–¬ãŒè©°ã‚ã‚‰ã‚Œã€ç©ºä¸­ã§çœŸã‚“ä¸¸ã«é–‹ãã®ãŒç‰¹å¾´ã€‚", note: "è‹±èªã§ã¯'Chrysanthemum'ï¼ˆèŠï¼‰ãªã©ã¨å‘¼ã°ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚" },
            { phrase: "æ˜Ÿ", reading: "ã»ã—", meaning: "èŠ±ç«ç‰ã®ä¸­ã«è©°ã‚ã‚‰ã‚Œã‚‹ç«è–¬ã®å¡Šã€‚ç‡ƒç„¼ã—ãªãŒã‚‰é£›ã³æ•£ã‚Šã€å…‰ã‚„è‰²ã‚’æ”¾ã¤ã€‚", note: "ã“ã®æ˜Ÿã®é…åˆã§è‰²ãŒæ±ºã¾ã‚Šã¾ã™ã€‚" },
            { phrase: "èŠ¯ç‰©", reading: "ã—ã‚“ã‚‚ã®", meaning: "å‰²ç‰©ã®ä¸€ç¨®ã§ã€åŒå¿ƒå††çŠ¶ã«äºŒé‡ã€ä¸‰é‡ã®èŠ±ãŒé–‹ãæ§‹é€ ã®ã‚‚ã®ã€‚", note: "å¤šé‡èŠ¯ï¼ˆå…«é‡èŠ¯ã€ä¸‰é‡èŠ¯ãªã©ï¼‰ã¯æŠ€è¡“åŠ›ã®è¨¼æ˜ã§ã™ã€‚" },
            { phrase: "èŠ±ç«å¸«", reading: "ã¯ãªã³ã—", meaning: "èŠ±ç«ã®è£½é€ ã‚„æ‰“ã¡ä¸Šã’ã‚’è¡Œã†è·äººã€‚", note: "å›½å®¶è³‡æ ¼ã§ã‚ã‚‹ç«è–¬é¡å–æ‰±ä¿å®‰è²¬ä»»è€…ãªã©ã®å…è¨±ãŒå¿…è¦ã§ã™ã€‚" },
            { phrase: "ç›†", reading: "ã¼ã‚“", meaning: "èŠ±ç«ãŒå¤œç©ºã§é–‹ã„ãŸæ™‚ã®å…¨ä½“ã®åºƒãŒã‚Šã®å½¢ã€‚", note: "ã€Œç›†ãŒè‰¯ã„ã€ã¨ã¯ã€ä¸¸ããã‚Œã„ã«åºƒãŒã£ãŸçŠ¶æ…‹ã‚’æŒ‡ã—ã¾ã™ã€‚" },
            { phrase: "æ˜ŸãŒæ³³ã", reading: "ã»ã—ãŒãŠã‚ˆã", meaning: "æ˜ŸãŒã¾ã£ã™ãã«é£›ã°ãšã€è›‡è¡Œã—ã¦ã—ã¾ã†ç¾è±¡ã€‚", note: "è£½ä½œä¸Šã®ä¸å‚™ã‚„ãƒãƒ©ãƒ³ã‚¹ã®æ‚ªã•ãŒåŸå› ã¨ãªã‚Šã¾ã™ã€‚" },
            { phrase: "æŠœã‘æ˜Ÿ", reading: "ã¬ã‘ã¼ã—", meaning: "ä¸€éƒ¨ã®æ˜ŸãŒç€ç«ã—ãªã‹ã£ãŸã‚Šã—ã¦ã€å…‰ã®å††ãŒæ¬ ã‘ã¦ã—ã¾ã†ç¾è±¡ã€‚", note: "å®Œå…¨ãªçƒä½“ã‚’ç†æƒ³ã¨ã™ã‚‹æ—¥æœ¬ã®èŠ±ç«ã§ã¯å¤±æ•—ã¨ã•ã‚Œã¾ã™ã€‚" },
            { phrase: "æ¶ˆãˆå£", reading: "ããˆãã¡", meaning: "èŠ±ç«ã®å…‰ãŒä¸€æ–‰ã«æ¶ˆãˆã‚‹ç¬é–“ã€‚", note: "ã€Œæ¶ˆãˆå£ãŒã‚ˆã„ã€ã¨ã¯ã€ãƒãƒ©ãƒãƒ©ã«ãªã‚‰ãšãƒ‘ãƒƒã¨åŒæ™‚ã«æ¶ˆãˆã‚‹ã“ã¨ã§ã™ã€‚" },
            { phrase: "ç´ç·š", reading: "ãã‚“ã›ã‚“", meaning: "å¿ƒã®å¥¥ã«ã‚ã‚‹ã€æ„Ÿå‹•ã—ã‚„ã™ã„æ„Ÿæƒ…ã€‚", note: "ã€Œç´ç·šã«è§¦ã‚Œã‚‹ã€ã§ã€æ·±ãæ„Ÿå‹•ã™ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚" },
            { phrase: "ä¸¹ç²¾", reading: "ãŸã‚“ã›ã„", meaning: "å¿ƒã‚’è¾¼ã‚ã¦ç‰©äº‹ã‚’è¡Œã†ã“ã¨ã€‚", note: "ã€Œä¸¹ç²¾è¾¼ã‚ã¦ä½œã‚‹ã€ãªã©ã®ã‚ˆã†ã«ä½¿ã‚ã‚Œã¾ã™ã€‚" },
            { phrase: "æƒ…ç·’", reading: "ã˜ã‚‡ã†ã¡ã‚‡", meaning: "æŠ˜ã«è§¦ã‚Œã¦èµ·ã“ã‚‹ã€ã—ã¿ã˜ã¿ã¨ã—ãŸæ„Ÿæƒ…ã€‚", note: "æ—¥æœ¬çš„ãªç¾æ„è­˜ã«ãŠã„ã¦é‡è¦è¦–ã•ã‚Œã¾ã™ã€‚" }
        ];

        // æ§‹é€ åˆ†æãƒ‡ãƒ¼ã‚¿
        const STRUCTURE_PARTS = [
            { title: "å°å…¥ï¼šæ—¥æœ¬ã®èŠ±ç«ã®ç¾çŠ¶", summary: "èŠ±ç«å¤§ä¼šã®æ•°ã¨äººæ°—", detail: "æ—¥æœ¬å…¨å›½ã§å¤šæ•°é–‹å‚¬ã•ã‚Œã€å¤šãã®è¦³å®¢ã‚’é›†ã‚ã‚‹ã€‚ãªãœã“ã‚Œã»ã©äººã‚’æƒ¹ãã¤ã‘ã‚‹ã®ã‹ã¨ã„ã†å•ã„ã‹ã‘ã€‚", isOpen: true },
            { title: "æœ¬è«–1ï¼šæ—¥æœ¬èŠ±ç«ã®ç‰¹å¾´", summary: "ã€Œä¸€ç™ºã®ç¾ã€ã®è¿½æ±‚", detail: "æ¬§ç±³ã®é€£ç™ºå¼ã¨ã¯ç•°ãªã‚Šã€ä¸€ç™ºã®ã€Œæ•´ã£ãŸå½¢ã€ã¨ã€Œè‰²å½©å¤‰åŒ–ã€ã‚’é‡è¦–ã™ã‚‹ã€Œå‰²ç‰©ã€ã®æŠ€è¡“çš„ç‰¹å¾´ã€‚", isOpen: false },
            { title: "æœ¬è«–2ï¼šæŠ€è¡“ã®ç²‹ã€ŒèŠ¯ç‰©ã€", summary: "é«˜åº¦ãªæŠ€è¡“ã¨è·äººé­‚", detail: "å¤šé‡æ§‹é€ ã‚’æŒã¤ã€ŒèŠ¯ç‰©ã€ã®é›£æ˜“åº¦ã¨ã€ãã‚Œã‚’ä½œã‚Šå‡ºã™èŠ±ç«å¸«ã®æ¢ç©¶å¿ƒã€‚", isOpen: false },
            { title: "æœ¬è«–3ï¼šç†æƒ³ã®è¿½æ±‚", summary: "ã€Œä¸¸ã•ã€ã¨ã€Œä¸€æ–‰å¤‰åŒ–ã€", detail: "ç†æƒ³çš„ãªã€Œç›†ï¼ˆå½¢ï¼‰ã€ã€ã€Œæ¶ˆãˆå£ï¼ˆæ¶ˆãˆéš›ï¼‰ã€ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®ã€éƒ¨å“ä½œã‚Šã‹ã‚‰æ‰“ã¡ä¸Šã’ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¾ã§ã®ç·»å¯†ãªä½œæ¥­ã€‚", isOpen: false },
            { title: "çµè«–ï¼šèŠ¸è¡“ã¨ã—ã¦ã®èŠ±ç«", summary: "å„šã•ã¨ç¾ã—ã•ã®å…±å­˜", detail: "æŠ€è¡“ã«è£æ‰“ã¡ã•ã‚ŒãŸä¸€ç¬ã®ç¾ã—ã•ãŒã€æ—¥æœ¬äººã®æƒ…ç·’ã‚„ç´ç·šã«è§¦ã‚Œã‚‹èŠ¸è¡“ã§ã‚ã‚‹ã¨ã„ã†çµã³ã€‚", isOpen: false }
        ];

        // è¦ç´ åˆ†æãƒ‡ãƒ¼ã‚¿
        const ELEMENTS_DATA = [
            { 
                name: "èŠ±ç«å¸«", 
                subTitle: "The Pyrotechnician", 
                description: "å±é™ºã‚’ä¼´ã†ç«è–¬ã‚’æ‰±ã„ã€ç†æƒ³ã®ç¾ã‚’è¿½æ±‚ã™ã‚‹è·äººã€‚ç§‘å­¦çš„ãªç²¾åº¦ã¨èŠ¸è¡“çš„ãªæ„Ÿæ€§ã®ä¸¡æ–¹ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ã€‚",
                quote: "ä¸å¯§ãªä½œæ¥­ã‚’ç©ã¿é‡ã­ã‚‹ã“ã¨ã§ã€ç†æƒ³ã®å§¿ã«è¿‘ã¥ã‘ã¦ã„ãã®ã ã¨èŠ±ç«å¸«ã¯è¨€ã†ã€‚",
                detail: "èŠ±ç«å¸«ã¯å˜ãªã‚‹è£½é€ è€…ã§ã¯ãªãã€å¤œç©ºã¨ã„ã†ã‚­ãƒ£ãƒ³ãƒã‚¹ã«çµµã‚’æãèŠ¸è¡“å®¶ã§ã™ã€‚è¨˜äº‹ä¸­ã§ã¯ã€å½¼ã‚‰ã®ã€Œæ¢æ±‚ã™ã‚‹ç²¾ç¥ã€ã€Œç´°å¿ƒã®ä½œæ¥­ã€ã€Œå®‰å…¨ã¸ã®é…æ…®ã€ãŒå¼·èª¿ã•ã‚Œã¦ã„ã¾ã™ã€‚",
                points: ["æ‰‹ä½œæ¥­ã«ã‚ˆã‚‹ç²¾åº¦ã®è¿½æ±‚", "å®‰å…¨ç®¡ç†ã¨å‰µä½œã®ä¸¡ç«‹", "å¹´ã«æ•°å€‹ã—ã‹ç´å¾—ã®ã„ãã‚‚ã®ã¯ã§ããªã„ã¨ã„ã†å³ã—ã•"]
            },
            { 
                name: "å‰²ç‰©", 
                subTitle: "Warimono Shells", 
                description: "æ—¥æœ¬ã®èŠ±ç«ã®ä¸»æµã§ã‚ã‚‹ã€çƒçŠ¶ã«é–‹ãèŠ±ç«ã€‚å®Œç’§ãªçƒä½“ã‚’ç›®æŒ‡ã—ã¦é€²åŒ–ã—ã¦ããŸã€‚",
                quote: "ä¸€ç¬ã§ç«è–¬ã®ç‡ƒç„¼ã«ã‚ˆã‚‹èŠ±ãŒå¤§ããæ•´ã£ãŸçƒä½“ã«åºƒãŒã‚‹ã€‚",
                detail: "ã€Œå‰²ç‰©ã€ã¯æ—¥æœ¬èŠ±ç«ã®ä»£åè©ã§ã™ã€‚æµ·å¤–ã®å††ç­’å½¢ã®èŠ±ç«ã¨ç•°ãªã‚Šã€çƒä½“ã®æ®»ã®ä¸­ã«æ˜Ÿã‚’é…ç½®ã™ã‚‹ã“ã¨ã§ã€ç©ºä¸­ã§çœŸã‚“ä¸¸ã«é–‹ãæ§‹é€ ã‚’æŒã£ã¦ã„ã¾ã™ã€‚",
                points: ["æ•´ã£ãŸå½¢ï¼ˆçƒä½“ï¼‰", "æ˜ç­ãªè‰²å½©å¤‰åŒ–", "äºŒé‡ä¸‰é‡ã®å±¤æ§‹é€ ï¼ˆèŠ¯ç‰©ï¼‰"]
            },
            { 
                name: "æ˜Ÿ", 
                subTitle: "Stars (Hoshi)", 
                description: "èŠ±ç«ã®å…‰ã¨è‰²ã®æºã€‚èŠ±ç«ã®å‘½ã¨ã‚‚å‘¼ã°ã‚Œã‚‹é‡è¦ãªéƒ¨å“ã€‚",
                quote: "å…¨ã¦ã®æ˜ŸãŒä¸€ç³¸ä¹±ã‚Œãšå‡ç­‰ã«é£›ã³ã€åŒæ™‚ã«å¤‰è‰²ã—ã€æ¶ˆãˆãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚",
                detail: "ã€Œæ˜Ÿã€ã®å‡è³ªæ€§ãŒèŠ±ç«ã®è‰¯ã—æ‚ªã—ã‚’æ±ºå®šã¥ã‘ã¾ã™ã€‚å¤§ãã•ã‚„ç«è–¬ã®é…åˆãŒã‚ãšã‹ã§ã‚‚é•ã†ã¨ã€é£›ã¶é€Ÿåº¦ã‚„æ¶ˆãˆã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒãšã‚Œã€å¤±æ•—ä½œï¼ˆæ˜ŸãŒæ³³ãã€æŠœã‘æ˜Ÿï¼‰ã¨ãªã‚Šã¾ã™ã€‚",
                points: ["èŠ±ç«ã®å‘½ã¨ã„ã‚ã‚Œã‚‹", "è£½ä½œã«æœ€ã‚‚ç¥çµŒã‚’ä½¿ã†éƒ¨å“", "å¤‰è‰²ã¨åŒæ™‚æ¶ˆå¤±ã®éµ"]
            },
            { 
                name: "è¦³å®¢ãƒ»æ—¥æœ¬äºº", 
                subTitle: "Audience / Japanese Sensibility", 
                description: "èŠ±ç«ã®å„šã•ã«ç¾ã‚’è¦‹å‡ºã™å—ã‘æ‰‹ã€‚",
                quote: "è¯ã‚„ã‹ã•ã¨ã¯ã‹ãªã•ã¨ã‚’åŒæ™‚ã«å‘³ã‚ãˆã‚‹èŠ±ç«ã¯ã€å®Ÿã«ç´ç·šã«ãµã‚Œã‚‹",
                detail: "ç­†è€…ã¯ã€èŠ±ç«æŠ€è¡“ã®é«˜ã•ã ã‘ã§ãªãã€ãã‚Œã‚’å—ã‘æ­¢ã‚ã‚‹æ—¥æœ¬äººã®æ„Ÿæ€§ï¼ˆæƒ…ç·’ã€é¢¨æƒ…ï¼‰ãŒèŠ±ç«ã‚’ã€ŒèŠ¸è¡“ã€ã«é«˜ã‚ã¦ã„ã‚‹ã¨åˆ†æã—ã¦ã„ã¾ã™ã€‚",
                points: ["ä¸€ç¬ã§æ¶ˆãˆã‚‹ã‚‚ã®ã¸ã®æ„›ç€", "æŠ€è¡“ã®èƒŒå¾Œã«ã‚ã‚‹ç‰©èªã‚’æ„Ÿã˜ã‚‹å¿ƒ", "ä½™éŸ»ã‚’æ¥½ã—ã‚€"]
            }
        ];

        // ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰è©³ç´°ãƒ‡ãƒ¼ã‚¿ (10å€‹ä»¥ä¸Š)
        const KEYWORDS_DATA = [
            { term: "å‰²ç‰©", category: "ç¨®é¡", definition: "çƒçŠ¶ã®ç‰ãŒç ´è£‚ã—ã¦ã€æ˜ŸãŒçƒå½¢ã«é£›æ•£ã™ã‚‹æ—¥æœ¬ã®ä»£è¡¨çš„ãªèŠ±ç«ã€‚", context: "æ¬§ç±³ã®èŠ±ç«ã¨ã®å¯¾æ¯”ã¨ã—ã¦ã€æ—¥æœ¬ç‹¬è‡ªã®ç™ºé”ã‚’é‚ã’ãŸå½¢å¼ã€‚", isOpen: false },
            { term: "èŠ¯ç‰©", category: "ç¨®é¡", definition: "å‰²ç‰©ã®å†…éƒ¨ã«ã€ã•ã‚‰ã«å°ã•ãªçƒä½“ï¼ˆèŠ¯ï¼‰ã‚’å«ã‚€æ§‹é€ ã®èŠ±ç«ã€‚", context: "èŠ±ç«å¸«ã®æŠ€è¡“åŠ›ã®é«˜ã•ã‚’è±¡å¾´ã™ã‚‹ã€è£½ä½œé›£æ˜“åº¦ã®é«˜ã„èŠ±ç«ã€‚", isOpen: false },
            { term: "æ˜Ÿ", category: "éƒ¨å“", definition: "ç«è–¬ã‚’ä¸¸ã‚ãŸç²’ã€‚ç‡ƒãˆãªãŒã‚‰å…‰ã‚„è‰²ã‚’å‡ºã™ã€‚", context: "èŠ±ç«ã®ã€Œå‘½ã€ã¨è¡¨ç¾ã•ã‚Œã‚‹æœ€é‡è¦éƒ¨å“ã€‚", isOpen: false },
            { term: "å‰²ç«è–¬", category: "éƒ¨å“", definition: "èŠ±ç«ç‰ã‚’ç©ºä¸­ã§çˆ†ç™ºã•ã›ã€æ˜Ÿã‚’é£›ã°ã™ãŸã‚ã®ç«è–¬ã€‚", context: "æ˜Ÿã‚’é ãã¸å‡ç­‰ã«é£›ã°ã™ãŸã‚ã®çˆ†ç™ºåŠ›ã®èª¿æ•´ãŒå¿…è¦ã€‚", isOpen: false },
            { term: "ç›†", category: "å½¢çŠ¶", definition: "èŠ±ç«ãŒé–‹ã„ãŸæ™‚ã®å…¨ä½“ã®å½¢ã€åºƒãŒã‚Šã€‚", context: "ã€Œç†æƒ³çš„ãªç›†ã€ã‚’ä½œã‚‹ã“ã¨ãŒèŠ±ç«å¸«ã®ç›®æ¨™ã€‚", isOpen: false },
            { term: "æ˜ŸãŒæ³³ã", category: "ç¾è±¡", definition: "æ˜ŸãŒã¾ã£ã™ãã«é£›ã°ãšã€ãµã‚‰ãµã‚‰ã¨è›‡è¡Œã™ã‚‹ã“ã¨ã€‚", context: "å¤±æ•—ä¾‹ã¨ã—ã¦æŒ™ã’ã‚‰ã‚Œã€ç²¾åº¦ã®ä½ã•ã‚’ç¤ºã™ã€‚", isOpen: false },
            { term: "æŠœã‘æ˜Ÿ", category: "ç¾è±¡", definition: "ä¸€éƒ¨ã®æ˜ŸãŒå…‰ã‚‰ãšã€å††å½¢ã®ä¸€éƒ¨ãŒæ¬ ã‘ã‚‹ã“ã¨ã€‚", context: "ã“ã‚Œã‚‚å¤±æ•—ä¾‹ã€‚å‡ä¸€æ€§ãŒæãªã‚ã‚ŒãŸçŠ¶æ…‹ã€‚", isOpen: false },
            { term: "æ¶ˆãˆå£", category: "ç¾å­¦", definition: "èŠ±ç«ãŒç‡ƒãˆå°½ãã¦æ¶ˆãˆã‚‹ç¬é–“ã€‚", context: "ä¸€æ–‰ã«ãƒ‘ãƒƒã¨æ¶ˆãˆã‚‹ã€Œæ¶ˆãˆå£ã®ã‚ˆã•ã€ãŒç†æƒ³ã¨ã•ã‚Œã‚‹ã€‚", isOpen: false },
            { term: "ç‰çš®", category: "éƒ¨å“", definition: "èŠ±ç«ç‰ã®å¤–å´ã‚’è¦†ã†æ®»ã€‚", context: "ã“ã®å¼·åº¦ãŒå‰²ç«è–¬ã®çˆ†ç™ºåŠ›ã¨ãƒãƒ©ãƒ³ã‚¹å–ã‚Œã¦ã„ãªã„ã¨ãã‚Œã„ã«é–‹ã‹ãªã„ã€‚", isOpen: false },
            { term: "ç´ç·š", category: "æ„Ÿæƒ…", definition: "å¿ƒã®å¥¥ã«ã‚ã‚‹ã€æ„Ÿå‹•ã—ã‚„ã™ã„å¿ƒæƒ…ã€‚", context: "èŠ±ç«ãŒæ—¥æœ¬äººã®å¿ƒã«æ·±ãéŸ¿ãç†ç”±ã®èª¬æ˜ã¨ã—ã¦ä½¿ç”¨ã€‚", isOpen: false },
            { term: "ä¸¹ç²¾", category: "æ…‹åº¦", definition: "å¿ƒã‚’è¾¼ã‚ã¦ç‰©äº‹ã‚’è¡Œã†ã“ã¨ã€‚", context: "èŠ±ç«å¸«ã®åŠªåŠ›ã¨èª å®Ÿãªå§¿å‹¢ã‚’è¡¨ã™è¨€è‘‰ã€‚", isOpen: false },
            { term: "ä½™éŸ»", category: "ç¾å­¦", definition: "éŸ³ãŒæ­¢ã‚“ã ã‚Šã€äº‹è±¡ãŒçµ‚ã‚ã£ãŸå¾Œã«æ®‹ã‚‹éŸ¿ãã‚„å‘³ã‚ã„ã€‚", context: "èŠ±ç«ãŒæ¶ˆãˆãŸå¾Œã®æš—é—‡ã¨é™å¯‚ã«æ„Ÿã˜ã‚‹ç¾ã—ã•ã€‚", isOpen: false },
            { term: "å¤‰è‰²", category: "æŠ€è¡“", definition: "ç‡ƒç„¼ä¸­ã«èŠ±ç«ã®è‰²ãŒå¤‰ã‚ã‚‹ã“ã¨ã€‚", context: "æ—¥æœ¬ã®èŠ±ç«ã®å¤§ããªç‰¹å¾´ã®ä¸€ã¤ã§ã€å¤šå±¤æ§‹é€ ã®æ˜Ÿã«ã‚ˆã£ã¦å®Ÿç¾ã™ã‚‹ã€‚", isOpen: false }
        ];

        const app = createApp({
            setup() {
                // ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªçŠ¶æ…‹
                const currentView = ref('overview');
                const scrollSavedMessage = ref(false);
                const activeAnnotation = ref(null);
                const activeModalElement = ref(null);

                // ãƒ‡ãƒ¼ã‚¿å®šæ•°ã®å‚ç…§
                const workTitle = WORK_TITLE;
                const authorName = AUTHOR_NAME;
                const textParagraphs = TEXT_PARAGRAPHS;
                const overviewTags = ["å›½èªç·åˆ", "è©•è«–", "æ—¥æœ¬ã®æ–‡åŒ–", "èŠ¸è¡“è«–", "è·äººæŠ€è¡“"];
                
                // ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ‡ãƒ¼ã‚¿åŒ–
                const structureParts = ref(STRUCTURE_PARTS);
                const elements = ref(ELEMENTS_DATA);
                const keywords = ref(KEYWORDS_DATA);

                // ãƒ“ãƒ¥ãƒ¼å®šç¾©
                const views = [
                    { id: 'overview', label: 'å¤§ã¾ã‹ãªå†…å®¹' },
                    { id: 'elements', label: 'è¦ç´ åˆ†æ' },
                    { id: 'keywords', label: 'ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰' },
                    { id: 'read', label: 'æœ¬æ–‡ã‚’èª­ã‚€' }
                ];

                /* * ==========================================
                 * 2. èª­æ›¸ä½ç½®ã®è¨˜æ†¶ãƒ­ã‚¸ãƒƒã‚¯
                 * ==========================================
                 */
                const saveScrollPosition = () => {
                    if (currentView.value === 'read') {
                        localStorage.setItem('fireworks_scroll_pos', window.scrollY);
                        scrollSavedMessage.value = true;
                        setTimeout(() => scrollSavedMessage.value = false, 2000);
                    }
                };

                const restoreScrollPosition = () => {
                    const savedPos = localStorage.getItem('fireworks_scroll_pos');
                    if (savedPos) {
                        // DOMæ›´æ–°å¾Œã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’å®Ÿè¡Œ
                        nextTick(() => {
                            window.scrollTo({ top: parseInt(savedPos), behavior: 'auto' });
                        });
                    } else {
                        window.scrollTo(0, 0);
                    }
                };

                // ãƒ“ãƒ¥ãƒ¼åˆ‡ã‚Šæ›¿ãˆæ™‚ã®å‡¦ç†
                const changeView = (viewId) => {
                    // ç¾åœ¨ãŒã€Œæœ¬æ–‡ã‚’èª­ã‚€ã€ãªã‚‰ä½ç½®ä¿å­˜
                    if (currentView.value === 'read') {
                        saveScrollPosition();
                    }

                    currentView.value = viewId;
                    activeAnnotation.value = null; // ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’é–‰ã˜ã‚‹

                    // ã€Œæœ¬æ–‡ã‚’èª­ã‚€ã€ã¸ç§»å‹•æ™‚ã¯ä½ç½®å¾©å…ƒã€ãã‚Œä»¥å¤–ã¯ãƒˆãƒƒãƒ—ã¸
                    if (viewId === 'read') {
                        restoreScrollPosition();
                    } else {
                        window.scrollTo(0, 0);
                    }
                };

                /* * ==========================================
                 * 3. æœ¬æ–‡ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¨æ³¨é‡ˆå‡¦ç†
                 * ==========================================
                 */
                const processedParagraphs = computed(() => {
                    return textParagraphs.map(para => {
                        let processed = para;
                        // æ³¨é‡ˆãƒªã‚¹ãƒˆã«åŸºã¥ã„ã¦HTMLã‚¿ã‚°ã‚’æŒ¿å…¥
                        // æ³¨æ„: å˜ç´”ãªç½®æ›ã ã¨é‡è¤‡ãƒãƒƒãƒãªã©ã®å•é¡ŒãŒå‡ºã‚‹å ´åˆãŒã‚ã‚‹ãŒã€
                        // ã“ã®è¦æ¨¡ã®ãƒ†ã‚­ã‚¹ãƒˆã§ã¯ã‚·ãƒ³ãƒ—ãƒ«ãªç½®æ›ã§ååˆ†æ©Ÿèƒ½ã™ã‚‹ã€‚
                        ANNOTATIONS.forEach((anno, index) => {
                            // æ­£è¦è¡¨ç¾ã§ã‚°ãƒ­ãƒ¼ãƒãƒ«ç½®æ›
                            const regex = new RegExp(anno.phrase, 'g');
                            // data-idxå±æ€§ã§é…åˆ—ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æŒãŸã›ã‚‹
                            processed = processed.replace(regex, 
                                `<span class="interactive-word" data-idx="${index}">${anno.phrase}</span>`
                            );
                        });
                        return processed;
                    });
                });

                // æœ¬æ–‡ã‚¯ãƒªãƒƒã‚¯æ™‚ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ãƒªã‚²ãƒ¼ã‚·ãƒ§ãƒ³
                const handleTextClick = (event) => {
                    const target = event.target;
                    if (target.classList.contains('interactive-word')) {
                        const idx = target.getAttribute('data-idx');
                        activeAnnotation.value = ANNOTATIONS[idx];
                    }
                };

                // ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆã®é–‹é–‰
                const toggleKeyword = (kwd) => {
                    kwd.isOpen = !kwd.isOpen;
                };

                // è¦ç´ è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã
                const openElementModal = (elm) => {
                    activeModalElement.value = elm;
                };

                // ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‹ã‚‰æœ¬æ–‡ã¸ã‚¸ãƒ£ãƒ³ãƒ—ï¼ˆç°¡æ˜“å®Ÿè£…ï¼šæœ¬æ–‡ãƒ“ãƒ¥ãƒ¼ã¸ç§»å‹•ã™ã‚‹ã ã‘ï¼‰
                const jumpToText = (term) => {
                    changeView('read');
                    // æ¤œç´¢ãƒ­ã‚¸ãƒƒã‚¯ã¯ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¾©å…ƒã¨ç«¶åˆã™ã‚‹ãŸã‚ã€ä»Šå›ã¯ãƒ“ãƒ¥ãƒ¼åˆ‡ã‚Šæ›¿ãˆã®ã¿ã¨ã™ã‚‹
                    // æœ¬æ ¼å®Ÿè£…ã™ã‚‹å ´åˆã¯nextTickå¾Œã«è¦ç´ æ¤œç´¢ã—ã¦scrollIntoViewã‚’ä½¿ã†
                };

                // å®šæœŸçš„ãªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä½ç½®ä¿å­˜ (é›¢è„±æ™‚ã ã‘ã§ãªãã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä¸­ã‚‚ä¿å­˜ã—ãŸã„å ´åˆ)
                // ä»Šå›ã¯è¦ä»¶é€šã‚Šã€Œé›¢è„±ã—ã¦æˆ»ã£ã¦ããŸéš›ã€ã‚’é‡è¦–ã™ã‚‹ãŸã‚changeViewã§åˆ¶å¾¡ã—ã¦ã„ã‚‹ãŒã€
                // ãƒ–ãƒ©ã‚¦ã‚¶é–‰ã˜å¯¾ç­–ã¨ã—ã¦beforeunloadã‚¤ãƒ™ãƒ³ãƒˆã‚‚è¿½åŠ ã€‚
                onMounted(() => {
                    window.addEventListener('beforeunload', () => {
                        if (currentView.value === 'read') {
                            localStorage.setItem('fireworks_scroll_pos', window.scrollY);
                        }
                    });
                });

                return {
                    currentView,
                    views,
                    workTitle,
                    authorName,
                    overviewTags,
                    structureParts,
                    elements,
                    keywords,
                    processedParagraphs,
                    activeAnnotation,
                    activeModalElement,
                    scrollSavedMessage,
                    changeView,
                    handleTextClick,
                    toggleKeyword,
                    openElementModal,
                    jumpToText
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
